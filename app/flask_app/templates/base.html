<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>3D Precipitation & Reflectivity Visualization System</title>

    <!-- Bootstrap/JQuery Requirements -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    
    <!-- React Requirements -->
    <script crossorigin src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    <script src='https://unpkg.com/babel-standalone@6.26.0/babel.js'></script>

    <!-- Tempus Dominus Requirements -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
      crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@eonasdan/tempus-dominus@6.7.11/dist/js/tempus-dominus.min.js"
      crossorigin="anonymous"></script>
    <link rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@eonasdan/tempus-dominus@6.7.11/dist/css/tempus-dominus.min.css"
      crossorigin="anonymous">

    <!-- Plotly Requirements -->
    <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>

    <!-- Custom Style / Scripts -->
    <link rel="stylesheet" href="{{url_for('static', filename='css/styles.css')}}">
    <script src="{{url_for('static', filename='scripts.js')}}"></script>

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="{{url_for('static', filename='cisess_logo_white.png')}}">
  </head>

  <body>
    {% include "header.html" %}

    <div class="container-fluid mt-0">
      <div class="row">
        {% include "sidebar.html" %}
        
        <div id="content" class="col-md-9 mt-5 px-5 pb-5 min-vh-100">
          {% block content %}{% endblock %}  
        </div>
        
        <div id="modalContainer"></div>
      </div>
    </div>

    {% include "footer.html" %}
      
      <!-- Render React components -->
      <script async src="{{url_for('static', filename='components/LoadingModal.jsx')}}" type="text/babel"></script>
  </body>

  <script type="text/javascript" defer>
    var graph_type = "{{ graph_type | safe }}"
    var valid_dates = convert_to_dates({{ valid_dates | safe }})
    console.log(valid_dates)

    dateTimePicker = new tempusDominus.TempusDominus(document.getElementById('dateTimePicker'), {
      display: {
        inline: true,
        theme: 'light',
      },
      restrictions: {
        enabledDates: valid_dates
      }
    })

    if ($("#graph").length) {
      var graph = {{ graphJSON | safe}}
      Plotly.plot('graph', graph)
      $('#loading-icon').hide()
    }

    $("#dateTimePicker").addClass("bg-light")
  </script>
</html>